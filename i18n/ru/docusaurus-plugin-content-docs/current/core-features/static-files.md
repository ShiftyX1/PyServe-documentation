---
sidebar_position: 1
---

# Статические файлы

Узнайте, как обслуживать статические файлы с помощью PyServe

## Обзор статических файлов

PyServe упрощает обслуживание статических файлов, таких как HTML, CSS, JavaScript, изображения и другие ресурсы. По умолчанию статические файлы обслуживаются из директории `./static`, но вы можете настроить это местоположение.

:::info
**Примечание:** PyServe автоматически создаст директорию static, если она не существует.
:::

## Структура директорий

Типичная структура директории статических файлов может выглядеть так:

```
static/
├── css/
│   ├── styles.css
│   └── normalize.css
├── js/
│   ├── main.js
│   └── utils.js
├── images/
│   ├── logo.png
│   └── background.jpg
├── fonts/
│   └── roboto.woff2
└── index.html
```

Эта организация рекомендуется, но не обязательна. Вы можете структурировать свою статическую директорию как угодно.

## Доступ к статическим файлам

Существует два способа доступа к статическим файлам:

### 1. Использование префикса /static/

Файлы, размещенные в статической директории, можно получить, используя префикс `/static/` в URL:

```
http://localhost:8000/static/css/styles.css
http://localhost:8000/static/js/main.js
http://localhost:8000/static/images/logo.png
```

### 2. Прямой доступ от корня

Файлы в статической директории также могут быть доступны напрямую от корневого URL:

```
http://localhost:8000/index.html
http://localhost:8000/css/styles.css
http://localhost:8000/js/main.js
```

:::info
**Примечание:** Если файл существует по корневому пути, он имеет приоритет над соответствующим путем в статической директории.
:::

## Настройка директории статических файлов

Вы можете изменить директорию статических файлов несколькими способами:

### Используя аргументы командной строки
```bash
python run.py -s ./public
```

### Используя файл конфигурации
```yaml
http:
  static_dir: ./public
```

## Типы контента

PyServe автоматически устанавливает соответствующий заголовок `Content-Type` на основе расширения файла. Вот поддерживаемые типы контента:

| Расширение | Тип контента |
|------------|--------------|
| `.html` | text/html |
| `.css` | text/css |
| `.js` | application/javascript |
| `.json` | application/json |
| `.png` | image/png |
| `.jpg, .jpeg` | image/jpeg |
| `.gif` | image/gif |
| `.svg` | image/svg+xml |
| `.ico` | image/x-icon |
| другие | application/octet-stream |

## Пример: HTML-страница со статическими ресурсами

Вот пример простой HTML-страницы, которая ссылается на CSS и JavaScript файлы:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пример PyServe</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <h1>Добро пожаловать в PyServe</h1>
        <p>Это простая примерная страница.</p>
        <img src="/static/images/logo.png" alt="Логотип">
    </div>
    
    <script src="/static/js/main.js"></script>
</body>
</html>
```

С соответствующим CSS файлом `static/css/styles.css`:

```css
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f5f5f5;
}

.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
}

h1 {
    color: #2c3e50;
}
```

И JavaScript файлом `static/js/main.js`:

```javascript
document.addEventListener('DOMContentLoaded', function() {
    console.log('Страница загружена успешно');
});
```

## Соображения безопасности

### Защита от обхода директории

PyServe включает защиту от атак обхода директории, предотвращая доступ к файлам вне статической директории с использованием путей вроде `../../../etc/passwd`.

### Права доступа к файлам

Убедитесь, что ваши статические файлы имеют соответствующие разрешения. PyServe работает с разрешениями пользователя, который его запускает, поэтому он может обслуживать только файлы, на чтение которых у этого пользователя есть разрешения.

:::warning
**Предупреждение:** Будьте осторожны с тем, что размещаете в своей статической директории. Не включайте конфиденциальную информацию или файлы конфигурации, которые не должны быть публично доступными.
:::

## Лучшие практики

- Организуйте свои статические файлы в поддиректории по типу (css, js, images и т.д.)
- Минимизируйте размер статических файлов для использования в производстве
- Используйте описательные имена файлов, которые указывают на назначение файла
- Рассмотрите использование версионирования в именах файлов (например, `styles.v1.css`) для обработки кэширования
- Для больших приложений рассмотрите использование CDN или выделенного сервера статических файлов в производстве